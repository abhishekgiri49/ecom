$(document).ready(function(){
    $('#addtowish').on('click',function(){
        console.log('click');
        $('#addtowish').toggleClass('red');
    });
    $('.category--sub-title').on('click',function(){
        var self = $(this);
        var child=self.children('.category--sub-category') ;
        child.toggle(500);
    });
});
/* Set rates + misc */
// var taxRate = 0.05;
var shippingRate = 15.00;
var fadeTime = 300;


/* Assign actions */
$('.product-quantity input').change( function() {
    updateQuantity(this);
});

$('.product-remove .remove').click( function() {
    removeItem(this);
});


/* Recalculate cart */
function recalculateCart()
{
    var subtotal = 0;
    // var taxtotal=0;
    /* Sum up row totals */
    // $('.product').each(function () {
    //     subtotal += parseFloat($(this).children('.product-subtotal').text());
    // });

    /* Calculate totals */
    // var tax = (price * taxRate) / 100;

    $('.cart_item').each(function () {
        // taxvalue = $(this).children('.product-unitprice').children('#cart_tax').attr('value');
        var pricevalue=$(this).children('.product-price').children('.amount').children('.price').text();
        var quantityvalue=$(this).children('.product-quantity').children('.quantity').children('input').val();
        subtotal = subtotal + (quantityvalue*pricevalue);
        // var taxprice=((quantityvalue*pricevalue)*taxvalue)/100;
        // taxtotal +=taxprice;

    });
    // var grandtotal = subtotal+taxtotal;

    /* Update totals display */
    $('.totals_value').fadeOut(fadeTime, function() {
        $('#subtotal').html(subtotal.toFixed(2));

        // $('#cart-tax').html(taxtotal.toFixed(2));

        $('#grandtotal').html(subtotal.toFixed(2));
        // if(grandtotal === 0){
        //     $('.checkout-btn').fadeOut(fadeTime);
        // }else{
        //     $('.checkout-btn').fadeIn(fadeTime);
        // }
        $('.totals_value').fadeIn(fadeTime);
        console.log(subtotal);
    });

}


/* Update quantity */
function updateQuantity(quantityInput)
{

    /* Calculate line price */
    var productRow = $(quantityInput).parent().parent().parent();
    var price = parseFloat(productRow.children('.product-price').children('.amount').children('.price').text());

    var quantity = $(quantityInput).val();
    var linePrice = price * quantity;
    // var taxy=$(quantityInput).parent().parent().children('.product-unitprice').children('#cart_tax').attr('value');
    // var actualPrice = linePrice + (linePrice * (taxy / 100));
    //
    // /* Update line price display and recalc cart totals */
    productRow.children('.product-subtotal').children('.amount').children('.price').each(function () {
        $(this).fadeOut(fadeTime, function() {
            // $(this).text(actualPrice.toFixed(2));
            $(this).text(linePrice.toFixed(2));
            recalculateCart();
            $(this).fadeIn(fadeTime);
        });
    });
    // console.log(linePrice);
}


/* Remove item from cart */
function removeItem(removeButton)
{
    /* Remove row from DOM and recalc cart total */
    var productRow = $(removeButton).parent().parent();
    productRow.slideUp(fadeTime, function() {
        productRow.remove();
        recalculateCart();
    });
}
// filtering







// account settings
function accountsettings(evt, settingName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tabslinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active-tab", "");
    }

    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(settingName).style.display = "block";
    evt.currentTarget.className += " active-tab";


}
// Get the element with id="defaultOpen" and click on it
// document.getElementById("defaultOpen").click();
// alert box removal
$(document).ready(function () {

    $('button.alert--close').on('click', function() {
        removeAlert(this);
    });

    function removeAlert(removeButton){
        /* Remove row from DOM  */
        var alertRow = $(removeButton).parent();
        alertRow.slideUp(fadeTime, function() {
            alertRow.remove();
        });
    }
});
$(document).ready(function(){
    $('.user__container li a').on('click',function(){
        var select=$(this).attr('id');
        localStorage.setItem('s',select);

    });
    $('.desktop-grouplist ul li a').on('click',function(){
        var select=$(this).attr('id');
        localStorage.setItem('s',select);
    });

    var length=$('.profile__section .desktop-grouplist ul li').length;
    var get=localStorage.getItem('s');
    for(var i=0;i<length;i++){
        var block=$('.profile__section .desktop-grouplist ul li').eq(i).children('a');
        var z=block.attr('id');
        if(get==z){
            // block.attr('class','active-tab');
            block.addClass('active-tab');
            block.click();
            break;
        }

    }

});


//jQuery time
var current_fs, next_fs, previous_fs; //fieldsets
var left, opacity, scale; //fieldset properties which we will animate
var animating; //flag to prevent quick multi-click glitches

$(".next").click(function(){
    // if(animating) return false;
    // animating = true;
    // current_fs = $(this).parent().parent().parent().parent().parent();
    // next_fs = $(this).parent().parent().parent().parent().parent().next();
    current_fs = $(this).parents('fieldset');
    next_fs=$(this).parents('fieldset').next();

    //activate next step on progressbar using the index of next_fs
    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("actively");

    //show the next fieldset
    // next_fs.show();
    next_fs.show();
    current_fs.hide();

});

$(".submit").click(function(){
    return false;
});



// vertical settings
function accountsettings(evt, settingName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tabslinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active-tab", "");
    }

    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(settingName).style.display = "block";
    evt.currentTarget.className += " active-tab";


}
// Get the element with id="defaultOpen" and click on it

// document.getElementById("defaultOpen").click();

(function($) {

    $.fn.menuAim = function(opts) {
        // Initialize menu-aim for all elements in jQuery collection
        this.each(function() {
            init.call(this, opts);
        });

        return this;
    };

    function init(opts) {
        var $menu = $(this),
            activeRow = null,
            mouseLocs = [],
            lastDelayLoc = null,
            timeoutId = null,
            options = $.extend({
                rowSelector: "> li",
                submenuSelector: "*",
                submenuDirection: "right",
                tolerance: 75,  // bigger = more forgivey when entering submenu
                enter: $.noop,
                exit: $.noop,
                activate: $.noop,
                deactivate: $.noop,
                exitMenu: $.noop
            }, opts);

        var MOUSE_LOCS_TRACKED = 3,  // number of past mouse locations to track
            DELAY = 300;  // ms delay when user appears to be entering submenu

        /**
         * Keep track of the last few locations of the mouse.
         */
        var mousemoveDocument = function(e) {
            mouseLocs.push({x: e.pageX, y: e.pageY});

            if (mouseLocs.length > MOUSE_LOCS_TRACKED) {
                mouseLocs.shift();
            }
        };

        /**
         * Cancel possible row activations when leaving the menu entirely
         */
        var mouseleaveMenu = function() {
            if (timeoutId) {
                clearTimeout(timeoutId);
            }

            // If exitMenu is supplied and returns true, deactivate the
            // currently active row on menu exit.
            if (options.exitMenu(this)) {
                if (activeRow) {
                    options.deactivate(activeRow);
                }

                activeRow = null;
            }
        };

        /**
         * Trigger a possible row activation whenever entering a new row.
         */
        var mouseenterRow = function() {
                if (timeoutId) {
                    // Cancel any previous activation delays
                    clearTimeout(timeoutId);
                }

                options.enter(this);
                possiblyActivate(this);
            },
            mouseleaveRow = function() {
                options.exit(this);
            };

        /*
         * Immediately activate a row if the user clicks on it.
         */
        var clickRow = function() {
            activate(this);
        };

        /**
         * Activate a menu row.
         */
        var activate = function(row) {
            if (row == activeRow) {
                return;
            }

            if (activeRow) {
                options.deactivate(activeRow);
            }

            options.activate(row);
            activeRow = row;
        };

        /**
         * Possibly activate a menu row. If mouse movement indicates that we
         * shouldn't activate yet because user may be trying to enter
         * a submenu's content, then delay and check again later.
         */
        var possiblyActivate = function(row) {
            var delay = activationDelay();

            if (delay) {
                timeoutId = setTimeout(function() {
                    possiblyActivate(row);
                }, delay);
            } else {
                activate(row);
            }
        };

        /**
         * Return the amount of time that should be used as a delay before the
         * currently hovered row is activated.
         *
         * Returns 0 if the activation should happen immediately. Otherwise,
         * returns the number of milliseconds that should be delayed before
         * checking again to see if the row should be activated.
         */
        var activationDelay = function() {
            if (!activeRow || !$(activeRow).is(options.submenuSelector)) {
                // If there is no other submenu row already active, then
                // go ahead and activate immediately.
                return 0;
            }

            var offset = $menu.offset(),
                upperLeft = {
                    x: offset.left,
                    y: offset.top - options.tolerance
                },
                upperRight = {
                    x: offset.left + $menu.outerWidth(),
                    y: upperLeft.y
                },
                lowerLeft = {
                    x: offset.left,
                    y: offset.top + $menu.outerHeight() + options.tolerance
                },
                lowerRight = {
                    x: offset.left + $menu.outerWidth(),
                    y: lowerLeft.y
                },
                loc = mouseLocs[mouseLocs.length - 1],
                prevLoc = mouseLocs[0];

            if (!loc) {
                return 0;
            }

            if (!prevLoc) {
                prevLoc = loc;
            }

            if (prevLoc.x < offset.left || prevLoc.x > lowerRight.x ||
                prevLoc.y < offset.top || prevLoc.y > lowerRight.y) {
                // If the previous mouse location was outside of the entire
                // menu's bounds, immediately activate.
                return 0;
            }

            if (lastDelayLoc &&
                loc.x == lastDelayLoc.x && loc.y == lastDelayLoc.y) {
                // If the mouse hasn't moved since the last time we checked
                // for activation status, immediately activate.
                return 0;
            }

            // Detect if the user is moving towards the currently activated
            // submenu.
            //
            // If the mouse is heading relatively clearly towards
            // the submenu's content, we should wait and give the user more
            // time before activating a new row. If the mouse is heading
            // elsewhere, we can immediately activate a new row.
            //
            // We detect this by calculating the slope formed between the
            // current mouse location and the upper/lower right points of
            // the menu. We do the same for the previous mouse location.
            // If the current mouse location's slopes are
            // increasing/decreasing appropriately compared to the
            // previous's, we know the user is moving toward the submenu.
            //
            // Note that since the y-axis increases as the cursor moves
            // down the screen, we are looking for the slope between the
            // cursor and the upper right corner to decrease over time, not
            // increase (somewhat counterintuitively).
            function slope(a, b) {
                return (b.y - a.y) / (b.x - a.x);
            }

            var decreasingCorner = upperRight,
                increasingCorner = lowerRight;

            // Our expectations for decreasing or increasing slope values
            // depends on which direction the submenu opens relative to the
            // main menu. By default, if the menu opens on the right, we
            // expect the slope between the cursor and the upper right
            // corner to decrease over time, as explained above. If the
            // submenu opens in a different direction, we change our slope
            // expectations.
            if (options.submenuDirection == "left") {
                decreasingCorner = lowerLeft;
                increasingCorner = upperLeft;
            } else if (options.submenuDirection == "below") {
                decreasingCorner = lowerRight;
                increasingCorner = lowerLeft;
            } else if (options.submenuDirection == "above") {
                decreasingCorner = upperLeft;
                increasingCorner = upperRight;
            }

            var decreasingSlope = slope(loc, decreasingCorner),
                increasingSlope = slope(loc, increasingCorner),
                prevDecreasingSlope = slope(prevLoc, decreasingCorner),
                prevIncreasingSlope = slope(prevLoc, increasingCorner);

            if (decreasingSlope < prevDecreasingSlope &&
                increasingSlope > prevIncreasingSlope) {
                // Mouse is moving from previous location towards the
                // currently activated submenu. Delay before activating a
                // new menu row, because user may be moving into submenu.
                lastDelayLoc = loc;
                return DELAY;
            }

            lastDelayLoc = null;
            return 0;
        };

        /**
         * Hook up initial menu events
         */
        $menu
            .mouseleave(mouseleaveMenu)
            .find(options.rowSelector)
            .mouseenter(mouseenterRow)
            .mouseleave(mouseleaveRow)
            .click(clickRow);

        $(document).mousemove(mousemoveDocument);

    }
})(jQuery);







jQuery(document).ready(function ($) {
    //open/close mega-navigation
    $('.cd-dropdown-trigger').on('click', function (event) {
        event.preventDefault();
        toggleNav();
    });

    //close meganavigation
    $('.cd-dropdown .cd-close').on('click', function (event) {
        event.preventDefault();
        toggleNav();
    });

    //on mobile - open submenu
    $('.has-children').children('a').on('click', function (event) {
        //prevent default clicking on direct children of .has-children
        event.preventDefault();
        var selected = $(this);
        selected.next('ul').removeClass('is-hidden').end().parent('.has-children').parent('ul').addClass('move-out');
    });

    //on desktop - differentiate between a user trying to hover over a dropdown item vs trying to navigate into a submenu's contents
    var submenuDirection = (!$('.cd-dropdown-wrapper').hasClass('open-to-left')) ? 'right' : 'left';
    $('.cd-dropdown-content').menuAim({
        activate: function (row) {
            $(row).children().addClass('is-active').removeClass('fade-out');
            if ($('.cd-dropdown-content .fade-in').length == 0) $(row).children('ul').addClass('fade-in');
        },
        deactivate: function (row) {
            $(row).children().removeClass('is-active');
            if ($('li.has-children:hover').length == 0 || $('li.has-children:hover').is($(row))) {
                $('.cd-dropdown-content').find('.fade-in').removeClass('fade-in');
                $(row).children('ul').addClass('fade-out');
            }
        },
        exitMenu: function () {
            $('.cd-dropdown-content').find('.is-active').removeClass('is-active');
            return true;
        },
        submenuDirection: submenuDirection,
    });

    //submenu items - go back link
    $('.go-back').on('click', function () {
        var selected = $(this),
            visibleNav = $(this).parent('ul').parent('.has-children').parent('ul');
        selected.parent('ul').addClass('is-hidden').parent('.has-children').parent('ul').removeClass('move-out');
    });

    function toggleNav() {
        var navIsVisible = (!$('.cd-dropdown').hasClass('dropdown-is-active')) ? true : false;
        $('.cd-dropdown').toggleClass('dropdown-is-active', navIsVisible);
        $('.cd-dropdown-trigger').toggleClass('dropdown-is-active', navIsVisible);
        if (!navIsVisible) {
            $('.cd-dropdown').one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function () {
                $('.has-children ul').addClass('is-hidden');
                $('.move-out').removeClass('move-out');
                $('.is-active').removeClass('is-active');
            });
        }
    }


});
$(function () {
    $(".comment").slice(0, 3).show();

    $("#loadMore").on('click', function (e) {
        e.preventDefault();
        $(".comment:hidden").slice(0, 3).slideDown();
        if ($(".comment:hidden").length == 0) {
            $("#loadMore").fadeOut('slow');
        }
        // $('html,body').animate({
        //     scrollTop: $(this).offset().top
        // }, 1500);
    });
});


$(function() {
    $('.grid .lazy').lazy({
        appendScroll: $('.grid')
    });
});


jQuery(document).ready(function($){
    $(".dropdown-button").dropdown();
    $('.modal').modal();
    $(".signup-toggle").click(function(){
        $(this).hide();
        $(".signupForm").show(300);
        $('.login-form').hide();
        $(".policy").css("visibility","visible");
    });
    $('.forgotpassword').click(function(){
        $(this).hide();
        $('.forgotpassowrd-form').show(300);
        $(".login-form,.signup-toggle").hide();
    });
    $('.returning-customer').click(function(){
        $('.forgotpassword,.login-form,.signup-toggle').show(300);
        $(".signupForm,.forgotpassowrd-form").hide();
    });

    $('#vendor-continue').click(function(){
        $(this).hide();
        $('.detailForm').show(300);
        $('.vendorsignup').hide();
    });
    $('.returning-vendor').click(function(){
        $('.vendorsignup,#vendor-continue').show(300);
        $(".detailForm").hide();
    });

//    checkout payment
    $('.payment_method input').click(function(){
        $('.payment_box').hide(300);
        $(this).parent().find('.payment_box').slideDown();
    });


});



$(document).ready(function(){
    $('.main-slider').owlCarousel({
        loop:true,
        margin:0,
        nav:false,
        items:1,
        animateOut: 'fadeOut',
        autoplay:true,
        smartSpeed:1000,
        dots:true,
        navText : ["<i class='fas fa-angle-left fa-2x'></i>","<i class='fas fa-angle-right fa-2x'></i>"],
        responsive:{
            0:{
                items:1
            }
        }
    });
    $('.product-description-slider').owlCarousel({
        loop:true,
        margin:0,
        nav:true,
        items:1,
        autoplay:true,
        smartSpeed:2000,
        dots:true,
        navText : ["<i class='fas fa-angle-left fa-2x'></i>","<i class='fas fa-angle-right fa-2x'></i>"],
        responsive:{
            0:{
                items:1
            }
        }
    });
    $('.product-carousel').owlCarousel({
        loop:true,
        margin:5,
        nav:true,
        items:4,
        pagination: false,
        autoplay:false,
        smartSpeed:1000,
        navText : ["<i class='fa fa-chevron-left fa-1x'></i>","<i class='fa fa-chevron-right fa-1x'></i>"],
        dots:false,
        responsive:{
            0:{
                items:1
            },
            400:{
                items:2
            },
            600:{
                items:3
            },
            1000:{
                items:6
            }
        }
    });
    $('.customers-testimonials').owlCarousel({
        loop: true,
        center: true,
        items: 1,
        nav:true,
        navText : ["<i class='fas fa-angle-left fa-2x'></i>","<i class='fas fa-angle-right fa-2x'></i>"],
        margin: 0,
        autoplay: true,
        dots:true,
        autoplayTimeout: 8500,
        smartSpeed: 500,
        responsive: {
            0: {
                items: 1
            }
        }
    });

    $('.owl-carousel').owlCarousel({
        loop:true,
        // margin:10,
        nav:true,
        items:4,
        pagination: false,
        autoplay:false,
        smartSpeed:1000,
        navText : ["<i class='fa fa-chevron-left fa-1x'></i>","<i class='fa fa-chevron-right fa-1x'></i>"],
        dots:true,
        responsive:{
            0:{
                items:1
            },
            400:{
                items:2
            },
            600:{
                items:3
            },
            1000:{
                items:4
            }
        }
    });

//     var owl = $('.owl-carousel');
//     // add animate.css class(es) to the elements to be animated
//     function setAnimation ( _elem, _InOut ) {
//         // Store all animationend event name in a string.
//         // cf animate.css documentation
//         var animationEndEvent = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
//
//         _elem.each ( function () {
//             var $elem = $(this);
//             var $animationType = 'animated ' + $elem.data( 'animation-' + _InOut );
//
//             $elem.addClass($animationType).one(animationEndEvent, function () {
//                 $elem.removeClass($animationType); // remove animate.css Class at the end of the animations
//             });
//         });
//     }
//
// // Fired before current slide change
//     owl.on('change.owl.carousel', function(event) {
//         var $currentItem = $('.owl-item', owl).eq(event.item.index);
//         var $elemsToanim = $currentItem.find("[data-animation-out]");
//         setAnimation ($elemsToanim, 'out');
//     });
//
// // Fired after current slide has been changed
//     var round = 0;
//     owl.on('changed.owl.carousel', function(event) {
//
//         var $currentItem = $('.owl-item', owl).eq(event.item.index);
//         var $elemsToanim = $currentItem.find("[data-animation-in]");
//
//         setAnimation ($elemsToanim, 'in');
//     })
//
//     owl.on('translated.owl.carousel', function(event) {
//         console.log (event.item.index, event.page.count);
//
//         if (event.item.index == (event.page.count - 1))  {
//             if (round < 1) {
//                 round++
//                 console.log (round);
//             } else {
//                 owl.trigger('stop.owl.autoplay');
//                 var owlData = owl.data('owl.carousel');
//                 owlData.settings.autoplay = false; //don't know if both are necessary
//                 owlData.options.autoplay = false;
//                 owl.trigger('refresh.owl.carousel');
//             }
//         }
//     });

});


$('#top').click(function () {
    $('body,html').animate({
        scrollTop: 0
    }, 600);
    return false;
});

$(window).scroll(function () {
    if ($(this).scrollTop() > 750) {
        $('.totop a').fadeIn();
    } else {
        $('.totop a').fadeOut();
    }
});

(function($){
    $('#thumbcarousel').carousel(0);
    var $thumbItems = $('#thumbcarousel .item');
    $('#carousel').on('slide.bs.carousel', function (event) {
        var $slide = $(event.relatedTarget);
        var thumbIndex = $slide.data('thumb');
        var curThumbIndex = $thumbItems.index($('#thumbcarousel .item.active').get(0));
        if (curThumbIndex>thumbIndex) {
            $('#thumbcarousel').one('slid.bs.carousel', function (event) {
                $('#thumbcarousel').carousel(thumbIndex);
            });
            if (curThumbIndex === ($thumbItems.length-1)) {
                $('#thumbcarousel').carousel('next');
            } else {
                $('#thumbcarousel').carousel(numThumbItems-1);
            }
        } else {
            $('#thumbcarousel').carousel(thumbIndex);
        }
    });



})(jQuery);



var w = $('.scrollnav-top').width();

if(w < 426 ){
    $('.lfix').show();
    $('.rfix').show();
}else{
    $('.lfix').hide();
    $('.rfix').hide();
}


$(document).ready(function () {
    $('.nextservice').click(function () {
        $('#serviceone').hide();
        $('#servicetwo').fadeIn();
    });
    $('.returnservice').click(function () {
        $('#servicetwo').hide();
        $('#serviceone').fadeIn();
    });

    //    service header
    $(window).scroll(function(){
        var scrollPos = $(document).scrollTop();
        if(scrollPos > 200){
            $('.site-header.service-header').addClass('showcolor');
        } else{
            $('.site-header.service-header').removeClass('showcolor');
        }

    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvbGRlci9jYXJ0LmpzIiwiZm9sZGVyL2NhcnRjaGVja291dC5qcyIsImZvbGRlci9kcm9wbWVudS5qcyIsImZvbGRlci9sb2FkbW9yZS5qcyIsImZvbGRlci9sb2dpbnJlZ2lzdGVyLmpzIiwiZm9sZGVyL293bC1wbHVnaW4uanMiLCJmb2xkZXIvcGx1Zy5qcyIsImZvbGRlci9zY3JpcHQuanMiLCJmb2xkZXIvc2VydmljZXNqcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pKQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcjYWRkdG93aXNoJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xyXG4gICAgICAgICQoJyNhZGR0b3dpc2gnKS50b2dnbGVDbGFzcygncmVkJyk7XHJcbiAgICB9KTtcclxuICAgICQoJy5jYXRlZ29yeS0tc3ViLXRpdGxlJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2hpbGQ9c2VsZi5jaGlsZHJlbignLmNhdGVnb3J5LS1zdWItY2F0ZWdvcnknKSA7XHJcbiAgICAgICAgY2hpbGQudG9nZ2xlKDUwMCk7XHJcbiAgICB9KTtcclxufSk7XHJcbi8qIFNldCByYXRlcyArIG1pc2MgKi9cclxuLy8gdmFyIHRheFJhdGUgPSAwLjA1O1xyXG52YXIgc2hpcHBpbmdSYXRlID0gMTUuMDA7XHJcbnZhciBmYWRlVGltZSA9IDMwMDtcclxuXHJcblxyXG4vKiBBc3NpZ24gYWN0aW9ucyAqL1xyXG4kKCcucHJvZHVjdC1xdWFudGl0eSBpbnB1dCcpLmNoYW5nZSggZnVuY3Rpb24oKSB7XHJcbiAgICB1cGRhdGVRdWFudGl0eSh0aGlzKTtcclxufSk7XHJcblxyXG4kKCcucHJvZHVjdC1yZW1vdmUgLnJlbW92ZScpLmNsaWNrKCBmdW5jdGlvbigpIHtcclxuICAgIHJlbW92ZUl0ZW0odGhpcyk7XHJcbn0pO1xyXG5cclxuXHJcbi8qIFJlY2FsY3VsYXRlIGNhcnQgKi9cclxuZnVuY3Rpb24gcmVjYWxjdWxhdGVDYXJ0KClcclxue1xyXG4gICAgdmFyIHN1YnRvdGFsID0gMDtcclxuICAgIC8vIHZhciB0YXh0b3RhbD0wO1xyXG4gICAgLyogU3VtIHVwIHJvdyB0b3RhbHMgKi9cclxuICAgIC8vICQoJy5wcm9kdWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICAgc3VidG90YWwgKz0gcGFyc2VGbG9hdCgkKHRoaXMpLmNoaWxkcmVuKCcucHJvZHVjdC1zdWJ0b3RhbCcpLnRleHQoKSk7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKiBDYWxjdWxhdGUgdG90YWxzICovXHJcbiAgICAvLyB2YXIgdGF4ID0gKHByaWNlICogdGF4UmF0ZSkgLyAxMDA7XHJcblxyXG4gICAgJCgnLmNhcnRfaXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRheHZhbHVlID0gJCh0aGlzKS5jaGlsZHJlbignLnByb2R1Y3QtdW5pdHByaWNlJykuY2hpbGRyZW4oJyNjYXJ0X3RheCcpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgdmFyIHByaWNldmFsdWU9JCh0aGlzKS5jaGlsZHJlbignLnByb2R1Y3QtcHJpY2UnKS5jaGlsZHJlbignLmFtb3VudCcpLmNoaWxkcmVuKCcucHJpY2UnKS50ZXh0KCk7XHJcbiAgICAgICAgdmFyIHF1YW50aXR5dmFsdWU9JCh0aGlzKS5jaGlsZHJlbignLnByb2R1Y3QtcXVhbnRpdHknKS5jaGlsZHJlbignLnF1YW50aXR5JykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgc3VidG90YWwgPSBzdWJ0b3RhbCArIChxdWFudGl0eXZhbHVlKnByaWNldmFsdWUpO1xyXG4gICAgICAgIC8vIHZhciB0YXhwcmljZT0oKHF1YW50aXR5dmFsdWUqcHJpY2V2YWx1ZSkqdGF4dmFsdWUpLzEwMDtcclxuICAgICAgICAvLyB0YXh0b3RhbCArPXRheHByaWNlO1xyXG5cclxuICAgIH0pO1xyXG4gICAgLy8gdmFyIGdyYW5kdG90YWwgPSBzdWJ0b3RhbCt0YXh0b3RhbDtcclxuXHJcbiAgICAvKiBVcGRhdGUgdG90YWxzIGRpc3BsYXkgKi9cclxuICAgICQoJy50b3RhbHNfdmFsdWUnKS5mYWRlT3V0KGZhZGVUaW1lLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjc3VidG90YWwnKS5odG1sKHN1YnRvdGFsLnRvRml4ZWQoMikpO1xyXG5cclxuICAgICAgICAvLyAkKCcjY2FydC10YXgnKS5odG1sKHRheHRvdGFsLnRvRml4ZWQoMikpO1xyXG5cclxuICAgICAgICAkKCcjZ3JhbmR0b3RhbCcpLmh0bWwoc3VidG90YWwudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgLy8gaWYoZ3JhbmR0b3RhbCA9PT0gMCl7XHJcbiAgICAgICAgLy8gICAgICQoJy5jaGVja291dC1idG4nKS5mYWRlT3V0KGZhZGVUaW1lKTtcclxuICAgICAgICAvLyB9ZWxzZXtcclxuICAgICAgICAvLyAgICAgJCgnLmNoZWNrb3V0LWJ0bicpLmZhZGVJbihmYWRlVGltZSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgICQoJy50b3RhbHNfdmFsdWUnKS5mYWRlSW4oZmFkZVRpbWUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHN1YnRvdGFsKTtcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcbi8qIFVwZGF0ZSBxdWFudGl0eSAqL1xyXG5mdW5jdGlvbiB1cGRhdGVRdWFudGl0eShxdWFudGl0eUlucHV0KVxyXG57XHJcblxyXG4gICAgLyogQ2FsY3VsYXRlIGxpbmUgcHJpY2UgKi9cclxuICAgIHZhciBwcm9kdWN0Um93ID0gJChxdWFudGl0eUlucHV0KS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgIHZhciBwcmljZSA9IHBhcnNlRmxvYXQocHJvZHVjdFJvdy5jaGlsZHJlbignLnByb2R1Y3QtcHJpY2UnKS5jaGlsZHJlbignLmFtb3VudCcpLmNoaWxkcmVuKCcucHJpY2UnKS50ZXh0KCkpO1xyXG5cclxuICAgIHZhciBxdWFudGl0eSA9ICQocXVhbnRpdHlJbnB1dCkudmFsKCk7XHJcbiAgICB2YXIgbGluZVByaWNlID0gcHJpY2UgKiBxdWFudGl0eTtcclxuICAgIC8vIHZhciB0YXh5PSQocXVhbnRpdHlJbnB1dCkucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oJy5wcm9kdWN0LXVuaXRwcmljZScpLmNoaWxkcmVuKCcjY2FydF90YXgnKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgLy8gdmFyIGFjdHVhbFByaWNlID0gbGluZVByaWNlICsgKGxpbmVQcmljZSAqICh0YXh5IC8gMTAwKSk7XHJcbiAgICAvL1xyXG4gICAgLy8gLyogVXBkYXRlIGxpbmUgcHJpY2UgZGlzcGxheSBhbmQgcmVjYWxjIGNhcnQgdG90YWxzICovXHJcbiAgICBwcm9kdWN0Um93LmNoaWxkcmVuKCcucHJvZHVjdC1zdWJ0b3RhbCcpLmNoaWxkcmVuKCcuYW1vdW50JykuY2hpbGRyZW4oJy5wcmljZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmFkZU91dChmYWRlVGltZSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vICQodGhpcykudGV4dChhY3R1YWxQcmljZS50b0ZpeGVkKDIpKTtcclxuICAgICAgICAgICAgJCh0aGlzKS50ZXh0KGxpbmVQcmljZS50b0ZpeGVkKDIpKTtcclxuICAgICAgICAgICAgcmVjYWxjdWxhdGVDYXJ0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykuZmFkZUluKGZhZGVUaW1lKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gY29uc29sZS5sb2cobGluZVByaWNlKTtcclxufVxyXG5cclxuXHJcbi8qIFJlbW92ZSBpdGVtIGZyb20gY2FydCAqL1xyXG5mdW5jdGlvbiByZW1vdmVJdGVtKHJlbW92ZUJ1dHRvbilcclxue1xyXG4gICAgLyogUmVtb3ZlIHJvdyBmcm9tIERPTSBhbmQgcmVjYWxjIGNhcnQgdG90YWwgKi9cclxuICAgIHZhciBwcm9kdWN0Um93ID0gJChyZW1vdmVCdXR0b24pLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgcHJvZHVjdFJvdy5zbGlkZVVwKGZhZGVUaW1lLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBwcm9kdWN0Um93LnJlbW92ZSgpO1xyXG4gICAgICAgIHJlY2FsY3VsYXRlQ2FydCgpO1xyXG4gICAgfSk7XHJcbn1cclxuLy8gZmlsdGVyaW5nXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBhY2NvdW50IHNldHRpbmdzXHJcbmZ1bmN0aW9uIGFjY291bnRzZXR0aW5ncyhldnQsIHNldHRpbmdOYW1lKSB7XHJcbiAgICAvLyBEZWNsYXJlIGFsbCB2YXJpYWJsZXNcclxuICAgIHZhciBpLCB0YWJjb250ZW50LCB0YWJsaW5rcztcclxuXHJcbiAgICAvLyBHZXQgYWxsIGVsZW1lbnRzIHdpdGggY2xhc3M9XCJ0YWJjb250ZW50XCIgYW5kIGhpZGUgdGhlbVxyXG4gICAgdGFiY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0YWJjb250ZW50XCIpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHRhYmNvbnRlbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0YWJjb250ZW50W2ldLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgYWxsIGVsZW1lbnRzIHdpdGggY2xhc3M9XCJ0YWJsaW5rc1wiIGFuZCByZW1vdmUgdGhlIGNsYXNzIFwiYWN0aXZlXCJcclxuICAgIHRhYmxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYnNsaW5rc1wiKTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCB0YWJsaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRhYmxpbmtzW2ldLmNsYXNzTmFtZSA9IHRhYmxpbmtzW2ldLmNsYXNzTmFtZS5yZXBsYWNlKFwiIGFjdGl2ZS10YWJcIiwgXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgY3VycmVudCB0YWIsIGFuZCBhZGQgYW4gXCJhY3RpdmVcIiBjbGFzcyB0byB0aGUgbGluayB0aGF0IG9wZW5lZCB0aGUgdGFiXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZXR0aW5nTmFtZSkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZSArPSBcIiBhY3RpdmUtdGFiXCI7XHJcblxyXG5cclxufVxyXG4vLyBHZXQgdGhlIGVsZW1lbnQgd2l0aCBpZD1cImRlZmF1bHRPcGVuXCIgYW5kIGNsaWNrIG9uIGl0XHJcbi8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVmYXVsdE9wZW5cIikuY2xpY2soKTtcclxuLy8gYWxlcnQgYm94IHJlbW92YWxcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICQoJ2J1dHRvbi5hbGVydC0tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICByZW1vdmVBbGVydCh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsZXJ0KHJlbW92ZUJ1dHRvbil7XHJcbiAgICAgICAgLyogUmVtb3ZlIHJvdyBmcm9tIERPTSAgKi9cclxuICAgICAgICB2YXIgYWxlcnRSb3cgPSAkKHJlbW92ZUJ1dHRvbikucGFyZW50KCk7XHJcbiAgICAgICAgYWxlcnRSb3cuc2xpZGVVcChmYWRlVGltZSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0Um93LnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICAgICQoJy51c2VyX19jb250YWluZXIgbGkgYScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgc2VsZWN0PSQodGhpcykuYXR0cignaWQnKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncycsc2VsZWN0KTtcclxuXHJcbiAgICB9KTtcclxuICAgICQoJy5kZXNrdG9wLWdyb3VwbGlzdCB1bCBsaSBhJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzZWxlY3Q9JCh0aGlzKS5hdHRyKCdpZCcpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzJyxzZWxlY3QpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGxlbmd0aD0kKCcucHJvZmlsZV9fc2VjdGlvbiAuZGVza3RvcC1ncm91cGxpc3QgdWwgbGknKS5sZW5ndGg7XHJcbiAgICB2YXIgZ2V0PWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzJyk7XHJcbiAgICBmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe1xyXG4gICAgICAgIHZhciBibG9jaz0kKCcucHJvZmlsZV9fc2VjdGlvbiAuZGVza3RvcC1ncm91cGxpc3QgdWwgbGknKS5lcShpKS5jaGlsZHJlbignYScpO1xyXG4gICAgICAgIHZhciB6PWJsb2NrLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgaWYoZ2V0PT16KXtcclxuICAgICAgICAgICAgLy8gYmxvY2suYXR0cignY2xhc3MnLCdhY3RpdmUtdGFiJyk7XHJcbiAgICAgICAgICAgIGJsb2NrLmFkZENsYXNzKCdhY3RpdmUtdGFiJyk7XHJcbiAgICAgICAgICAgIGJsb2NrLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KTtcclxuXHJcbiIsIi8valF1ZXJ5IHRpbWVcclxudmFyIGN1cnJlbnRfZnMsIG5leHRfZnMsIHByZXZpb3VzX2ZzOyAvL2ZpZWxkc2V0c1xyXG52YXIgbGVmdCwgb3BhY2l0eSwgc2NhbGU7IC8vZmllbGRzZXQgcHJvcGVydGllcyB3aGljaCB3ZSB3aWxsIGFuaW1hdGVcclxudmFyIGFuaW1hdGluZzsgLy9mbGFnIHRvIHByZXZlbnQgcXVpY2sgbXVsdGktY2xpY2sgZ2xpdGNoZXNcclxuXHJcbiQoXCIubmV4dFwiKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgLy8gaWYoYW5pbWF0aW5nKSByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyBhbmltYXRpbmcgPSB0cnVlO1xyXG4gICAgLy8gY3VycmVudF9mcyA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAvLyBuZXh0X2ZzID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5uZXh0KCk7XHJcbiAgICBjdXJyZW50X2ZzID0gJCh0aGlzKS5wYXJlbnRzKCdmaWVsZHNldCcpO1xyXG4gICAgbmV4dF9mcz0kKHRoaXMpLnBhcmVudHMoJ2ZpZWxkc2V0JykubmV4dCgpO1xyXG5cclxuICAgIC8vYWN0aXZhdGUgbmV4dCBzdGVwIG9uIHByb2dyZXNzYmFyIHVzaW5nIHRoZSBpbmRleCBvZiBuZXh0X2ZzXHJcbiAgICAkKFwiI3Byb2dyZXNzYmFyIGxpXCIpLmVxKCQoXCJmaWVsZHNldFwiKS5pbmRleChuZXh0X2ZzKSkuYWRkQ2xhc3MoXCJhY3RpdmVseVwiKTtcclxuXHJcbiAgICAvL3Nob3cgdGhlIG5leHQgZmllbGRzZXRcclxuICAgIC8vIG5leHRfZnMuc2hvdygpO1xyXG4gICAgbmV4dF9mcy5zaG93KCk7XHJcbiAgICBjdXJyZW50X2ZzLmhpZGUoKTtcclxuXHJcbn0pO1xyXG5cclxuJChcIi5zdWJtaXRcIikuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiBmYWxzZTtcclxufSk7XHJcblxyXG5cclxuXHJcbi8vIHZlcnRpY2FsIHNldHRpbmdzXHJcbmZ1bmN0aW9uIGFjY291bnRzZXR0aW5ncyhldnQsIHNldHRpbmdOYW1lKSB7XHJcbiAgICAvLyBEZWNsYXJlIGFsbCB2YXJpYWJsZXNcclxuICAgIHZhciBpLCB0YWJjb250ZW50LCB0YWJsaW5rcztcclxuXHJcbiAgICAvLyBHZXQgYWxsIGVsZW1lbnRzIHdpdGggY2xhc3M9XCJ0YWJjb250ZW50XCIgYW5kIGhpZGUgdGhlbVxyXG4gICAgdGFiY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0YWJjb250ZW50XCIpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHRhYmNvbnRlbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0YWJjb250ZW50W2ldLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgYWxsIGVsZW1lbnRzIHdpdGggY2xhc3M9XCJ0YWJsaW5rc1wiIGFuZCByZW1vdmUgdGhlIGNsYXNzIFwiYWN0aXZlXCJcclxuICAgIHRhYmxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYnNsaW5rc1wiKTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCB0YWJsaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRhYmxpbmtzW2ldLmNsYXNzTmFtZSA9IHRhYmxpbmtzW2ldLmNsYXNzTmFtZS5yZXBsYWNlKFwiIGFjdGl2ZS10YWJcIiwgXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgY3VycmVudCB0YWIsIGFuZCBhZGQgYW4gXCJhY3RpdmVcIiBjbGFzcyB0byB0aGUgbGluayB0aGF0IG9wZW5lZCB0aGUgdGFiXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZXR0aW5nTmFtZSkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZSArPSBcIiBhY3RpdmUtdGFiXCI7XHJcblxyXG5cclxufVxyXG4vLyBHZXQgdGhlIGVsZW1lbnQgd2l0aCBpZD1cImRlZmF1bHRPcGVuXCIgYW5kIGNsaWNrIG9uIGl0XHJcblxyXG4vLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlZmF1bHRPcGVuXCIpLmNsaWNrKCk7IiwiXHJcbihmdW5jdGlvbigkKSB7XHJcblxyXG4gICAgJC5mbi5tZW51QWltID0gZnVuY3Rpb24ob3B0cykge1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgbWVudS1haW0gZm9yIGFsbCBlbGVtZW50cyBpbiBqUXVlcnkgY29sbGVjdGlvblxyXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5pdC5jYWxsKHRoaXMsIG9wdHMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdChvcHRzKSB7XHJcbiAgICAgICAgdmFyICRtZW51ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgYWN0aXZlUm93ID0gbnVsbCxcclxuICAgICAgICAgICAgbW91c2VMb2NzID0gW10sXHJcbiAgICAgICAgICAgIGxhc3REZWxheUxvYyA9IG51bGwsXHJcbiAgICAgICAgICAgIHRpbWVvdXRJZCA9IG51bGwsXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICByb3dTZWxlY3RvcjogXCI+IGxpXCIsXHJcbiAgICAgICAgICAgICAgICBzdWJtZW51U2VsZWN0b3I6IFwiKlwiLFxyXG4gICAgICAgICAgICAgICAgc3VibWVudURpcmVjdGlvbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgdG9sZXJhbmNlOiA3NSwgIC8vIGJpZ2dlciA9IG1vcmUgZm9yZ2l2ZXkgd2hlbiBlbnRlcmluZyBzdWJtZW51XHJcbiAgICAgICAgICAgICAgICBlbnRlcjogJC5ub29wLFxyXG4gICAgICAgICAgICAgICAgZXhpdDogJC5ub29wLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGU6ICQubm9vcCxcclxuICAgICAgICAgICAgICAgIGRlYWN0aXZhdGU6ICQubm9vcCxcclxuICAgICAgICAgICAgICAgIGV4aXRNZW51OiAkLm5vb3BcclxuICAgICAgICAgICAgfSwgb3B0cyk7XHJcblxyXG4gICAgICAgIHZhciBNT1VTRV9MT0NTX1RSQUNLRUQgPSAzLCAgLy8gbnVtYmVyIG9mIHBhc3QgbW91c2UgbG9jYXRpb25zIHRvIHRyYWNrXHJcbiAgICAgICAgICAgIERFTEFZID0gMzAwOyAgLy8gbXMgZGVsYXkgd2hlbiB1c2VyIGFwcGVhcnMgdG8gYmUgZW50ZXJpbmcgc3VibWVudVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBLZWVwIHRyYWNrIG9mIHRoZSBsYXN0IGZldyBsb2NhdGlvbnMgb2YgdGhlIG1vdXNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBtb3VzZW1vdmVEb2N1bWVudCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgbW91c2VMb2NzLnB1c2goe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb3VzZUxvY3MubGVuZ3RoID4gTU9VU0VfTE9DU19UUkFDS0VEKSB7XHJcbiAgICAgICAgICAgICAgICBtb3VzZUxvY3Muc2hpZnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbmNlbCBwb3NzaWJsZSByb3cgYWN0aXZhdGlvbnMgd2hlbiBsZWF2aW5nIHRoZSBtZW51IGVudGlyZWx5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIG1vdXNlbGVhdmVNZW51ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBleGl0TWVudSBpcyBzdXBwbGllZCBhbmQgcmV0dXJucyB0cnVlLCBkZWFjdGl2YXRlIHRoZVxyXG4gICAgICAgICAgICAvLyBjdXJyZW50bHkgYWN0aXZlIHJvdyBvbiBtZW51IGV4aXQuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmV4aXRNZW51KHRoaXMpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlUm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kZWFjdGl2YXRlKGFjdGl2ZVJvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaWdnZXIgYSBwb3NzaWJsZSByb3cgYWN0aXZhdGlvbiB3aGVuZXZlciBlbnRlcmluZyBhIG5ldyByb3cuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIG1vdXNlZW50ZXJSb3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYW5jZWwgYW55IHByZXZpb3VzIGFjdGl2YXRpb24gZGVsYXlzXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5lbnRlcih0aGlzKTtcclxuICAgICAgICAgICAgICAgIHBvc3NpYmx5QWN0aXZhdGUodGhpcyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdXNlbGVhdmVSb3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZXhpdCh0aGlzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBJbW1lZGlhdGVseSBhY3RpdmF0ZSBhIHJvdyBpZiB0aGUgdXNlciBjbGlja3Mgb24gaXQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGNsaWNrUm93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGFjdGl2YXRlKHRoaXMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFjdGl2YXRlIGEgbWVudSByb3cuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGFjdGl2YXRlID0gZnVuY3Rpb24ocm93KSB7XHJcbiAgICAgICAgICAgIGlmIChyb3cgPT0gYWN0aXZlUm93KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVSb3cpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGVhY3RpdmF0ZShhY3RpdmVSb3cpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmFjdGl2YXRlKHJvdyk7XHJcbiAgICAgICAgICAgIGFjdGl2ZVJvdyA9IHJvdztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQb3NzaWJseSBhY3RpdmF0ZSBhIG1lbnUgcm93LiBJZiBtb3VzZSBtb3ZlbWVudCBpbmRpY2F0ZXMgdGhhdCB3ZVxyXG4gICAgICAgICAqIHNob3VsZG4ndCBhY3RpdmF0ZSB5ZXQgYmVjYXVzZSB1c2VyIG1heSBiZSB0cnlpbmcgdG8gZW50ZXJcclxuICAgICAgICAgKiBhIHN1Ym1lbnUncyBjb250ZW50LCB0aGVuIGRlbGF5IGFuZCBjaGVjayBhZ2FpbiBsYXRlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgcG9zc2libHlBY3RpdmF0ZSA9IGZ1bmN0aW9uKHJvdykge1xyXG4gICAgICAgICAgICB2YXIgZGVsYXkgPSBhY3RpdmF0aW9uRGVsYXkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWxheSkge1xyXG4gICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NzaWJseUFjdGl2YXRlKHJvdyk7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZShyb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIHRoZSBhbW91bnQgb2YgdGltZSB0aGF0IHNob3VsZCBiZSB1c2VkIGFzIGEgZGVsYXkgYmVmb3JlIHRoZVxyXG4gICAgICAgICAqIGN1cnJlbnRseSBob3ZlcmVkIHJvdyBpcyBhY3RpdmF0ZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZXR1cm5zIDAgaWYgdGhlIGFjdGl2YXRpb24gc2hvdWxkIGhhcHBlbiBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlLFxyXG4gICAgICAgICAqIHJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBzaG91bGQgYmUgZGVsYXllZCBiZWZvcmVcclxuICAgICAgICAgKiBjaGVja2luZyBhZ2FpbiB0byBzZWUgaWYgdGhlIHJvdyBzaG91bGQgYmUgYWN0aXZhdGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBhY3RpdmF0aW9uRGVsYXkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVSb3cgfHwgISQoYWN0aXZlUm93KS5pcyhvcHRpb25zLnN1Ym1lbnVTZWxlY3RvcikpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIG90aGVyIHN1Ym1lbnUgcm93IGFscmVhZHkgYWN0aXZlLCB0aGVuXHJcbiAgICAgICAgICAgICAgICAvLyBnbyBhaGVhZCBhbmQgYWN0aXZhdGUgaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG9mZnNldCA9ICRtZW51Lm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgdXBwZXJMZWZ0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IG9mZnNldC50b3AgLSBvcHRpb25zLnRvbGVyYW5jZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwcGVyUmlnaHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogb2Zmc2V0LmxlZnQgKyAkbWVudS5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogdXBwZXJMZWZ0LnlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsb3dlckxlZnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogb2Zmc2V0LnRvcCArICRtZW51Lm91dGVySGVpZ2h0KCkgKyBvcHRpb25zLnRvbGVyYW5jZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxvd2VyUmlnaHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogb2Zmc2V0LmxlZnQgKyAkbWVudS5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogbG93ZXJMZWZ0LnlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsb2MgPSBtb3VzZUxvY3NbbW91c2VMb2NzLmxlbmd0aCAtIDFdLFxyXG4gICAgICAgICAgICAgICAgcHJldkxvYyA9IG1vdXNlTG9jc1swXTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbG9jKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFwcmV2TG9jKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2TG9jID0gbG9jO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocHJldkxvYy54IDwgb2Zmc2V0LmxlZnQgfHwgcHJldkxvYy54ID4gbG93ZXJSaWdodC54IHx8XHJcbiAgICAgICAgICAgICAgICBwcmV2TG9jLnkgPCBvZmZzZXQudG9wIHx8IHByZXZMb2MueSA+IGxvd2VyUmlnaHQueSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIG1vdXNlIGxvY2F0aW9uIHdhcyBvdXRzaWRlIG9mIHRoZSBlbnRpcmVcclxuICAgICAgICAgICAgICAgIC8vIG1lbnUncyBib3VuZHMsIGltbWVkaWF0ZWx5IGFjdGl2YXRlLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsYXN0RGVsYXlMb2MgJiZcclxuICAgICAgICAgICAgICAgIGxvYy54ID09IGxhc3REZWxheUxvYy54ICYmIGxvYy55ID09IGxhc3REZWxheUxvYy55KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbW91c2UgaGFzbid0IG1vdmVkIHNpbmNlIHRoZSBsYXN0IHRpbWUgd2UgY2hlY2tlZFxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGFjdGl2YXRpb24gc3RhdHVzLCBpbW1lZGlhdGVseSBhY3RpdmF0ZS5cclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZXRlY3QgaWYgdGhlIHVzZXIgaXMgbW92aW5nIHRvd2FyZHMgdGhlIGN1cnJlbnRseSBhY3RpdmF0ZWRcclxuICAgICAgICAgICAgLy8gc3VibWVudS5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gSWYgdGhlIG1vdXNlIGlzIGhlYWRpbmcgcmVsYXRpdmVseSBjbGVhcmx5IHRvd2FyZHNcclxuICAgICAgICAgICAgLy8gdGhlIHN1Ym1lbnUncyBjb250ZW50LCB3ZSBzaG91bGQgd2FpdCBhbmQgZ2l2ZSB0aGUgdXNlciBtb3JlXHJcbiAgICAgICAgICAgIC8vIHRpbWUgYmVmb3JlIGFjdGl2YXRpbmcgYSBuZXcgcm93LiBJZiB0aGUgbW91c2UgaXMgaGVhZGluZ1xyXG4gICAgICAgICAgICAvLyBlbHNld2hlcmUsIHdlIGNhbiBpbW1lZGlhdGVseSBhY3RpdmF0ZSBhIG5ldyByb3cuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIFdlIGRldGVjdCB0aGlzIGJ5IGNhbGN1bGF0aW5nIHRoZSBzbG9wZSBmb3JtZWQgYmV0d2VlbiB0aGVcclxuICAgICAgICAgICAgLy8gY3VycmVudCBtb3VzZSBsb2NhdGlvbiBhbmQgdGhlIHVwcGVyL2xvd2VyIHJpZ2h0IHBvaW50cyBvZlxyXG4gICAgICAgICAgICAvLyB0aGUgbWVudS4gV2UgZG8gdGhlIHNhbWUgZm9yIHRoZSBwcmV2aW91cyBtb3VzZSBsb2NhdGlvbi5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbW91c2UgbG9jYXRpb24ncyBzbG9wZXMgYXJlXHJcbiAgICAgICAgICAgIC8vIGluY3JlYXNpbmcvZGVjcmVhc2luZyBhcHByb3ByaWF0ZWx5IGNvbXBhcmVkIHRvIHRoZVxyXG4gICAgICAgICAgICAvLyBwcmV2aW91cydzLCB3ZSBrbm93IHRoZSB1c2VyIGlzIG1vdmluZyB0b3dhcmQgdGhlIHN1Ym1lbnUuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBzaW5jZSB0aGUgeS1heGlzIGluY3JlYXNlcyBhcyB0aGUgY3Vyc29yIG1vdmVzXHJcbiAgICAgICAgICAgIC8vIGRvd24gdGhlIHNjcmVlbiwgd2UgYXJlIGxvb2tpbmcgZm9yIHRoZSBzbG9wZSBiZXR3ZWVuIHRoZVxyXG4gICAgICAgICAgICAvLyBjdXJzb3IgYW5kIHRoZSB1cHBlciByaWdodCBjb3JuZXIgdG8gZGVjcmVhc2Ugb3ZlciB0aW1lLCBub3RcclxuICAgICAgICAgICAgLy8gaW5jcmVhc2UgKHNvbWV3aGF0IGNvdW50ZXJpbnR1aXRpdmVseSkuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNsb3BlKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoYi55IC0gYS55KSAvIChiLnggLSBhLngpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVjcmVhc2luZ0Nvcm5lciA9IHVwcGVyUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBpbmNyZWFzaW5nQ29ybmVyID0gbG93ZXJSaWdodDtcclxuXHJcbiAgICAgICAgICAgIC8vIE91ciBleHBlY3RhdGlvbnMgZm9yIGRlY3JlYXNpbmcgb3IgaW5jcmVhc2luZyBzbG9wZSB2YWx1ZXNcclxuICAgICAgICAgICAgLy8gZGVwZW5kcyBvbiB3aGljaCBkaXJlY3Rpb24gdGhlIHN1Ym1lbnUgb3BlbnMgcmVsYXRpdmUgdG8gdGhlXHJcbiAgICAgICAgICAgIC8vIG1haW4gbWVudS4gQnkgZGVmYXVsdCwgaWYgdGhlIG1lbnUgb3BlbnMgb24gdGhlIHJpZ2h0LCB3ZVxyXG4gICAgICAgICAgICAvLyBleHBlY3QgdGhlIHNsb3BlIGJldHdlZW4gdGhlIGN1cnNvciBhbmQgdGhlIHVwcGVyIHJpZ2h0XHJcbiAgICAgICAgICAgIC8vIGNvcm5lciB0byBkZWNyZWFzZSBvdmVyIHRpbWUsIGFzIGV4cGxhaW5lZCBhYm92ZS4gSWYgdGhlXHJcbiAgICAgICAgICAgIC8vIHN1Ym1lbnUgb3BlbnMgaW4gYSBkaWZmZXJlbnQgZGlyZWN0aW9uLCB3ZSBjaGFuZ2Ugb3VyIHNsb3BlXHJcbiAgICAgICAgICAgIC8vIGV4cGVjdGF0aW9ucy5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VibWVudURpcmVjdGlvbiA9PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICAgICAgZGVjcmVhc2luZ0Nvcm5lciA9IGxvd2VyTGVmdDtcclxuICAgICAgICAgICAgICAgIGluY3JlYXNpbmdDb3JuZXIgPSB1cHBlckxlZnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5zdWJtZW51RGlyZWN0aW9uID09IFwiYmVsb3dcIikge1xyXG4gICAgICAgICAgICAgICAgZGVjcmVhc2luZ0Nvcm5lciA9IGxvd2VyUmlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpbmNyZWFzaW5nQ29ybmVyID0gbG93ZXJMZWZ0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc3VibWVudURpcmVjdGlvbiA9PSBcImFib3ZlXCIpIHtcclxuICAgICAgICAgICAgICAgIGRlY3JlYXNpbmdDb3JuZXIgPSB1cHBlckxlZnQ7XHJcbiAgICAgICAgICAgICAgICBpbmNyZWFzaW5nQ29ybmVyID0gdXBwZXJSaWdodDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRlY3JlYXNpbmdTbG9wZSA9IHNsb3BlKGxvYywgZGVjcmVhc2luZ0Nvcm5lciksXHJcbiAgICAgICAgICAgICAgICBpbmNyZWFzaW5nU2xvcGUgPSBzbG9wZShsb2MsIGluY3JlYXNpbmdDb3JuZXIpLFxyXG4gICAgICAgICAgICAgICAgcHJldkRlY3JlYXNpbmdTbG9wZSA9IHNsb3BlKHByZXZMb2MsIGRlY3JlYXNpbmdDb3JuZXIpLFxyXG4gICAgICAgICAgICAgICAgcHJldkluY3JlYXNpbmdTbG9wZSA9IHNsb3BlKHByZXZMb2MsIGluY3JlYXNpbmdDb3JuZXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRlY3JlYXNpbmdTbG9wZSA8IHByZXZEZWNyZWFzaW5nU2xvcGUgJiZcclxuICAgICAgICAgICAgICAgIGluY3JlYXNpbmdTbG9wZSA+IHByZXZJbmNyZWFzaW5nU2xvcGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1vdXNlIGlzIG1vdmluZyBmcm9tIHByZXZpb3VzIGxvY2F0aW9uIHRvd2FyZHMgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50bHkgYWN0aXZhdGVkIHN1Ym1lbnUuIERlbGF5IGJlZm9yZSBhY3RpdmF0aW5nIGFcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBtZW51IHJvdywgYmVjYXVzZSB1c2VyIG1heSBiZSBtb3ZpbmcgaW50byBzdWJtZW51LlxyXG4gICAgICAgICAgICAgICAgbGFzdERlbGF5TG9jID0gbG9jO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERFTEFZO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYXN0RGVsYXlMb2MgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb29rIHVwIGluaXRpYWwgbWVudSBldmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICAkbWVudVxyXG4gICAgICAgICAgICAubW91c2VsZWF2ZShtb3VzZWxlYXZlTWVudSlcclxuICAgICAgICAgICAgLmZpbmQob3B0aW9ucy5yb3dTZWxlY3RvcilcclxuICAgICAgICAgICAgLm1vdXNlZW50ZXIobW91c2VlbnRlclJvdylcclxuICAgICAgICAgICAgLm1vdXNlbGVhdmUobW91c2VsZWF2ZVJvdylcclxuICAgICAgICAgICAgLmNsaWNrKGNsaWNrUm93KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkubW91c2Vtb3ZlKG1vdXNlbW92ZURvY3VtZW50KTtcclxuXHJcbiAgICB9XHJcbn0pKGpRdWVyeSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAvL29wZW4vY2xvc2UgbWVnYS1uYXZpZ2F0aW9uXHJcbiAgICAkKCcuY2QtZHJvcGRvd24tdHJpZ2dlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdG9nZ2xlTmF2KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2Nsb3NlIG1lZ2FuYXZpZ2F0aW9uXHJcbiAgICAkKCcuY2QtZHJvcGRvd24gLmNkLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0b2dnbGVOYXYoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vb24gbW9iaWxlIC0gb3BlbiBzdWJtZW51XHJcbiAgICAkKCcuaGFzLWNoaWxkcmVuJykuY2hpbGRyZW4oJ2EnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvL3ByZXZlbnQgZGVmYXVsdCBjbGlja2luZyBvbiBkaXJlY3QgY2hpbGRyZW4gb2YgLmhhcy1jaGlsZHJlblxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gJCh0aGlzKTtcclxuICAgICAgICBzZWxlY3RlZC5uZXh0KCd1bCcpLnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKS5lbmQoKS5wYXJlbnQoJy5oYXMtY2hpbGRyZW4nKS5wYXJlbnQoJ3VsJykuYWRkQ2xhc3MoJ21vdmUtb3V0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL29uIGRlc2t0b3AgLSBkaWZmZXJlbnRpYXRlIGJldHdlZW4gYSB1c2VyIHRyeWluZyB0byBob3ZlciBvdmVyIGEgZHJvcGRvd24gaXRlbSB2cyB0cnlpbmcgdG8gbmF2aWdhdGUgaW50byBhIHN1Ym1lbnUncyBjb250ZW50c1xyXG4gICAgdmFyIHN1Ym1lbnVEaXJlY3Rpb24gPSAoISQoJy5jZC1kcm9wZG93bi13cmFwcGVyJykuaGFzQ2xhc3MoJ29wZW4tdG8tbGVmdCcpKSA/ICdyaWdodCcgOiAnbGVmdCc7XHJcbiAgICAkKCcuY2QtZHJvcGRvd24tY29udGVudCcpLm1lbnVBaW0oe1xyXG4gICAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbiAocm93KSB7XHJcbiAgICAgICAgICAgICQocm93KS5jaGlsZHJlbigpLmFkZENsYXNzKCdpcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnZmFkZS1vdXQnKTtcclxuICAgICAgICAgICAgaWYgKCQoJy5jZC1kcm9wZG93bi1jb250ZW50IC5mYWRlLWluJykubGVuZ3RoID09IDApICQocm93KS5jaGlsZHJlbigndWwnKS5hZGRDbGFzcygnZmFkZS1pbicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gKHJvdykge1xyXG4gICAgICAgICAgICAkKHJvdykuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmICgkKCdsaS5oYXMtY2hpbGRyZW46aG92ZXInKS5sZW5ndGggPT0gMCB8fCAkKCdsaS5oYXMtY2hpbGRyZW46aG92ZXInKS5pcygkKHJvdykpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2QtZHJvcGRvd24tY29udGVudCcpLmZpbmQoJy5mYWRlLWluJykucmVtb3ZlQ2xhc3MoJ2ZhZGUtaW4nKTtcclxuICAgICAgICAgICAgICAgICQocm93KS5jaGlsZHJlbigndWwnKS5hZGRDbGFzcygnZmFkZS1vdXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhpdE1lbnU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLmNkLWRyb3Bkb3duLWNvbnRlbnQnKS5maW5kKCcuaXMtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Ym1lbnVEaXJlY3Rpb246IHN1Ym1lbnVEaXJlY3Rpb24sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3N1Ym1lbnUgaXRlbXMgLSBnbyBiYWNrIGxpbmtcclxuICAgICQoJy5nby1iYWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZCA9ICQodGhpcyksXHJcbiAgICAgICAgICAgIHZpc2libGVOYXYgPSAkKHRoaXMpLnBhcmVudCgndWwnKS5wYXJlbnQoJy5oYXMtY2hpbGRyZW4nKS5wYXJlbnQoJ3VsJyk7XHJcbiAgICAgICAgc2VsZWN0ZWQucGFyZW50KCd1bCcpLmFkZENsYXNzKCdpcy1oaWRkZW4nKS5wYXJlbnQoJy5oYXMtY2hpbGRyZW4nKS5wYXJlbnQoJ3VsJykucmVtb3ZlQ2xhc3MoJ21vdmUtb3V0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2dnbGVOYXYoKSB7XHJcbiAgICAgICAgdmFyIG5hdklzVmlzaWJsZSA9ICghJCgnLmNkLWRyb3Bkb3duJykuaGFzQ2xhc3MoJ2Ryb3Bkb3duLWlzLWFjdGl2ZScpKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAkKCcuY2QtZHJvcGRvd24nKS50b2dnbGVDbGFzcygnZHJvcGRvd24taXMtYWN0aXZlJywgbmF2SXNWaXNpYmxlKTtcclxuICAgICAgICAkKCcuY2QtZHJvcGRvd24tdHJpZ2dlcicpLnRvZ2dsZUNsYXNzKCdkcm9wZG93bi1pcy1hY3RpdmUnLCBuYXZJc1Zpc2libGUpO1xyXG4gICAgICAgIGlmICghbmF2SXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICQoJy5jZC1kcm9wZG93bicpLm9uZSgnd2Via2l0VHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCBvVHJhbnNpdGlvbkVuZCBtc1RyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5oYXMtY2hpbGRyZW4gdWwnKS5hZGRDbGFzcygnaXMtaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubW92ZS1vdXQnKS5yZW1vdmVDbGFzcygnbW92ZS1vdXQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5pcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59KTsiLCIkKGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuY29tbWVudFwiKS5zbGljZSgwLCAzKS5zaG93KCk7XHJcblxyXG4gICAgJChcIiNsb2FkTW9yZVwiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKFwiLmNvbW1lbnQ6aGlkZGVuXCIpLnNsaWNlKDAsIDMpLnNsaWRlRG93bigpO1xyXG4gICAgICAgIGlmICgkKFwiLmNvbW1lbnQ6aGlkZGVuXCIpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICQoXCIjbG9hZE1vcmVcIikuZmFkZU91dCgnc2xvdycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAvLyAgICAgc2Nyb2xsVG9wOiAkKHRoaXMpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgIC8vIH0sIDE1MDApO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbiQoZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcuZ3JpZCAubGF6eScpLmxhenkoe1xyXG4gICAgICAgIGFwcGVuZFNjcm9sbDogJCgnLmdyaWQnKVxyXG4gICAgfSk7XHJcbn0pO1xyXG4iLCJcclxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKXtcclxuICAgICQoXCIuZHJvcGRvd24tYnV0dG9uXCIpLmRyb3Bkb3duKCk7XHJcbiAgICAkKCcubW9kYWwnKS5tb2RhbCgpO1xyXG4gICAgJChcIi5zaWdudXAtdG9nZ2xlXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIi5zaWdudXBGb3JtXCIpLnNob3coMzAwKTtcclxuICAgICAgICAkKCcubG9naW4tZm9ybScpLmhpZGUoKTtcclxuICAgICAgICAkKFwiLnBvbGljeVwiKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuZm9yZ290cGFzc3dvcmQnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5mb3Jnb3RwYXNzb3dyZC1mb3JtJykuc2hvdygzMDApO1xyXG4gICAgICAgICQoXCIubG9naW4tZm9ybSwuc2lnbnVwLXRvZ2dsZVwiKS5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5yZXR1cm5pbmctY3VzdG9tZXInKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5mb3Jnb3RwYXNzd29yZCwubG9naW4tZm9ybSwuc2lnbnVwLXRvZ2dsZScpLnNob3coMzAwKTtcclxuICAgICAgICAkKFwiLnNpZ251cEZvcm0sLmZvcmdvdHBhc3Nvd3JkLWZvcm1cIikuaGlkZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI3ZlbmRvci1jb250aW51ZScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRldGFpbEZvcm0nKS5zaG93KDMwMCk7XHJcbiAgICAgICAgJCgnLnZlbmRvcnNpZ251cCcpLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLnJldHVybmluZy12ZW5kb3InKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy52ZW5kb3JzaWdudXAsI3ZlbmRvci1jb250aW51ZScpLnNob3coMzAwKTtcclxuICAgICAgICAkKFwiLmRldGFpbEZvcm1cIikuaGlkZSgpO1xyXG4gICAgfSk7XHJcblxyXG4vLyAgICBjaGVja291dCBwYXltZW50XHJcbiAgICAkKCcucGF5bWVudF9tZXRob2QgaW5wdXQnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5wYXltZW50X2JveCcpLmhpZGUoMzAwKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5wYXltZW50X2JveCcpLnNsaWRlRG93bigpO1xyXG4gICAgfSk7XHJcblxyXG5cclxufSk7XHJcblxyXG5cclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICAgICQoJy5tYWluLXNsaWRlcicpLm93bENhcm91c2VsKHtcclxuICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgbWFyZ2luOjAsXHJcbiAgICAgICAgbmF2OmZhbHNlLFxyXG4gICAgICAgIGl0ZW1zOjEsXHJcbiAgICAgICAgYW5pbWF0ZU91dDogJ2ZhZGVPdXQnLFxyXG4gICAgICAgIGF1dG9wbGF5OnRydWUsXHJcbiAgICAgICAgc21hcnRTcGVlZDoxMDAwLFxyXG4gICAgICAgIGRvdHM6dHJ1ZSxcclxuICAgICAgICBuYXZUZXh0IDogW1wiPGkgY2xhc3M9J2ZhcyBmYS1hbmdsZS1sZWZ0IGZhLTJ4Jz48L2k+XCIsXCI8aSBjbGFzcz0nZmFzIGZhLWFuZ2xlLXJpZ2h0IGZhLTJ4Jz48L2k+XCJdLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnLnByb2R1Y3QtZGVzY3JpcHRpb24tc2xpZGVyJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGxvb3A6dHJ1ZSxcclxuICAgICAgICBtYXJnaW46MCxcclxuICAgICAgICBuYXY6dHJ1ZSxcclxuICAgICAgICBpdGVtczoxLFxyXG4gICAgICAgIGF1dG9wbGF5OnRydWUsXHJcbiAgICAgICAgc21hcnRTcGVlZDoyMDAwLFxyXG4gICAgICAgIGRvdHM6dHJ1ZSxcclxuICAgICAgICBuYXZUZXh0IDogW1wiPGkgY2xhc3M9J2ZhcyBmYS1hbmdsZS1sZWZ0IGZhLTJ4Jz48L2k+XCIsXCI8aSBjbGFzcz0nZmFzIGZhLWFuZ2xlLXJpZ2h0IGZhLTJ4Jz48L2k+XCJdLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnLnByb2R1Y3QtY2Fyb3VzZWwnKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDp0cnVlLFxyXG4gICAgICAgIG1hcmdpbjo1LFxyXG4gICAgICAgIG5hdjp0cnVlLFxyXG4gICAgICAgIGl0ZW1zOjQsXHJcbiAgICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgICAgYXV0b3BsYXk6ZmFsc2UsXHJcbiAgICAgICAgc21hcnRTcGVlZDoxMDAwLFxyXG4gICAgICAgIG5hdlRleHQgOiBbXCI8aSBjbGFzcz0nZmEgZmEtY2hldnJvbi1sZWZ0IGZhLTF4Jz48L2k+XCIsXCI8aSBjbGFzcz0nZmEgZmEtY2hldnJvbi1yaWdodCBmYS0xeCc+PC9pPlwiXSxcclxuICAgICAgICBkb3RzOmZhbHNlLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNDAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNjAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTAwMDp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczo2XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJy5jdXN0b21lcnMtdGVzdGltb25pYWxzJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgY2VudGVyOiB0cnVlLFxyXG4gICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgIG5hdjp0cnVlLFxyXG4gICAgICAgIG5hdlRleHQgOiBbXCI8aSBjbGFzcz0nZmFzIGZhLWFuZ2xlLWxlZnQgZmEtMngnPjwvaT5cIixcIjxpIGNsYXNzPSdmYXMgZmEtYW5nbGUtcmlnaHQgZmEtMngnPjwvaT5cIl0sXHJcbiAgICAgICAgbWFyZ2luOiAwLFxyXG4gICAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgIGRvdHM6dHJ1ZSxcclxuICAgICAgICBhdXRvcGxheVRpbWVvdXQ6IDg1MDAsXHJcbiAgICAgICAgc21hcnRTcGVlZDogNTAwLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcclxuICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5vd2wtY2Fyb3VzZWwnKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDp0cnVlLFxyXG4gICAgICAgIC8vIG1hcmdpbjoxMCxcclxuICAgICAgICBuYXY6dHJ1ZSxcclxuICAgICAgICBpdGVtczo0LFxyXG4gICAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICAgIGF1dG9wbGF5OmZhbHNlLFxyXG4gICAgICAgIHNtYXJ0U3BlZWQ6MTAwMCxcclxuICAgICAgICBuYXZUZXh0IDogW1wiPGkgY2xhc3M9J2ZhIGZhLWNoZXZyb24tbGVmdCBmYS0xeCc+PC9pPlwiLFwiPGkgY2xhc3M9J2ZhIGZhLWNoZXZyb24tcmlnaHQgZmEtMXgnPjwvaT5cIl0sXHJcbiAgICAgICAgZG90czp0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNDAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNjAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTAwMDp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczo0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbi8vICAgICB2YXIgb3dsID0gJCgnLm93bC1jYXJvdXNlbCcpO1xyXG4vLyAgICAgLy8gYWRkIGFuaW1hdGUuY3NzIGNsYXNzKGVzKSB0byB0aGUgZWxlbWVudHMgdG8gYmUgYW5pbWF0ZWRcclxuLy8gICAgIGZ1bmN0aW9uIHNldEFuaW1hdGlvbiAoIF9lbGVtLCBfSW5PdXQgKSB7XHJcbi8vICAgICAgICAgLy8gU3RvcmUgYWxsIGFuaW1hdGlvbmVuZCBldmVudCBuYW1lIGluIGEgc3RyaW5nLlxyXG4vLyAgICAgICAgIC8vIGNmIGFuaW1hdGUuY3NzIGRvY3VtZW50YXRpb25cclxuLy8gICAgICAgICB2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSAnd2Via2l0QW5pbWF0aW9uRW5kIG1vekFuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIGFuaW1hdGlvbmVuZCc7XHJcbi8vXHJcbi8vICAgICAgICAgX2VsZW0uZWFjaCAoIGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAgICAgdmFyICRlbGVtID0gJCh0aGlzKTtcclxuLy8gICAgICAgICAgICAgdmFyICRhbmltYXRpb25UeXBlID0gJ2FuaW1hdGVkICcgKyAkZWxlbS5kYXRhKCAnYW5pbWF0aW9uLScgKyBfSW5PdXQgKTtcclxuLy9cclxuLy8gICAgICAgICAgICAgJGVsZW0uYWRkQ2xhc3MoJGFuaW1hdGlvblR5cGUpLm9uZShhbmltYXRpb25FbmRFdmVudCwgZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgICAgICAgICAgJGVsZW0ucmVtb3ZlQ2xhc3MoJGFuaW1hdGlvblR5cGUpOyAvLyByZW1vdmUgYW5pbWF0ZS5jc3MgQ2xhc3MgYXQgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uc1xyXG4vLyAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICB9KTtcclxuLy8gICAgIH1cclxuLy9cclxuLy8gLy8gRmlyZWQgYmVmb3JlIGN1cnJlbnQgc2xpZGUgY2hhbmdlXHJcbi8vICAgICBvd2wub24oJ2NoYW5nZS5vd2wuY2Fyb3VzZWwnLCBmdW5jdGlvbihldmVudCkge1xyXG4vLyAgICAgICAgIHZhciAkY3VycmVudEl0ZW0gPSAkKCcub3dsLWl0ZW0nLCBvd2wpLmVxKGV2ZW50Lml0ZW0uaW5kZXgpO1xyXG4vLyAgICAgICAgIHZhciAkZWxlbXNUb2FuaW0gPSAkY3VycmVudEl0ZW0uZmluZChcIltkYXRhLWFuaW1hdGlvbi1vdXRdXCIpO1xyXG4vLyAgICAgICAgIHNldEFuaW1hdGlvbiAoJGVsZW1zVG9hbmltLCAnb3V0Jyk7XHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gLy8gRmlyZWQgYWZ0ZXIgY3VycmVudCBzbGlkZSBoYXMgYmVlbiBjaGFuZ2VkXHJcbi8vICAgICB2YXIgcm91bmQgPSAwO1xyXG4vLyAgICAgb3dsLm9uKCdjaGFuZ2VkLm93bC5jYXJvdXNlbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbi8vXHJcbi8vICAgICAgICAgdmFyICRjdXJyZW50SXRlbSA9ICQoJy5vd2wtaXRlbScsIG93bCkuZXEoZXZlbnQuaXRlbS5pbmRleCk7XHJcbi8vICAgICAgICAgdmFyICRlbGVtc1RvYW5pbSA9ICRjdXJyZW50SXRlbS5maW5kKFwiW2RhdGEtYW5pbWF0aW9uLWluXVwiKTtcclxuLy9cclxuLy8gICAgICAgICBzZXRBbmltYXRpb24gKCRlbGVtc1RvYW5pbSwgJ2luJyk7XHJcbi8vICAgICB9KVxyXG4vL1xyXG4vLyAgICAgb3dsLm9uKCd0cmFuc2xhdGVkLm93bC5jYXJvdXNlbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbi8vICAgICAgICAgY29uc29sZS5sb2cgKGV2ZW50Lml0ZW0uaW5kZXgsIGV2ZW50LnBhZ2UuY291bnQpO1xyXG4vL1xyXG4vLyAgICAgICAgIGlmIChldmVudC5pdGVtLmluZGV4ID09IChldmVudC5wYWdlLmNvdW50IC0gMSkpICB7XHJcbi8vICAgICAgICAgICAgIGlmIChyb3VuZCA8IDEpIHtcclxuLy8gICAgICAgICAgICAgICAgIHJvdW5kKytcclxuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nIChyb3VuZCk7XHJcbi8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICBvd2wudHJpZ2dlcignc3RvcC5vd2wuYXV0b3BsYXknKTtcclxuLy8gICAgICAgICAgICAgICAgIHZhciBvd2xEYXRhID0gb3dsLmRhdGEoJ293bC5jYXJvdXNlbCcpO1xyXG4vLyAgICAgICAgICAgICAgICAgb3dsRGF0YS5zZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOyAvL2Rvbid0IGtub3cgaWYgYm90aCBhcmUgbmVjZXNzYXJ5XHJcbi8vICAgICAgICAgICAgICAgICBvd2xEYXRhLm9wdGlvbnMuYXV0b3BsYXkgPSBmYWxzZTtcclxuLy8gICAgICAgICAgICAgICAgIG93bC50cmlnZ2VyKCdyZWZyZXNoLm93bC5jYXJvdXNlbCcpO1xyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSk7XHJcblxyXG59KTtcclxuIiwiIiwiJCgnI3RvcCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQoJ2JvZHksaHRtbCcpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogMFxyXG4gICAgfSwgNjAwKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxufSk7XHJcblxyXG4kKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gNzUwKSB7XHJcbiAgICAgICAgJCgnLnRvdG9wIGEnKS5mYWRlSW4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLnRvdG9wIGEnKS5mYWRlT3V0KCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuKGZ1bmN0aW9uKCQpe1xyXG4gICAgJCgnI3RodW1iY2Fyb3VzZWwnKS5jYXJvdXNlbCgwKTtcclxuICAgIHZhciAkdGh1bWJJdGVtcyA9ICQoJyN0aHVtYmNhcm91c2VsIC5pdGVtJyk7XHJcbiAgICAkKCcjY2Fyb3VzZWwnKS5vbignc2xpZGUuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgJHNsaWRlID0gJChldmVudC5yZWxhdGVkVGFyZ2V0KTtcclxuICAgICAgICB2YXIgdGh1bWJJbmRleCA9ICRzbGlkZS5kYXRhKCd0aHVtYicpO1xyXG4gICAgICAgIHZhciBjdXJUaHVtYkluZGV4ID0gJHRodW1iSXRlbXMuaW5kZXgoJCgnI3RodW1iY2Fyb3VzZWwgLml0ZW0uYWN0aXZlJykuZ2V0KDApKTtcclxuICAgICAgICBpZiAoY3VyVGh1bWJJbmRleD50aHVtYkluZGV4KSB7XHJcbiAgICAgICAgICAgICQoJyN0aHVtYmNhcm91c2VsJykub25lKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjdGh1bWJjYXJvdXNlbCcpLmNhcm91c2VsKHRodW1iSW5kZXgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGN1clRodW1iSW5kZXggPT09ICgkdGh1bWJJdGVtcy5sZW5ndGgtMSkpIHtcclxuICAgICAgICAgICAgICAgICQoJyN0aHVtYmNhcm91c2VsJykuY2Fyb3VzZWwoJ25leHQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyN0aHVtYmNhcm91c2VsJykuY2Fyb3VzZWwobnVtVGh1bWJJdGVtcy0xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyN0aHVtYmNhcm91c2VsJykuY2Fyb3VzZWwodGh1bWJJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pKGpRdWVyeSk7XHJcblxyXG5cclxuXHJcbnZhciB3ID0gJCgnLnNjcm9sbG5hdi10b3AnKS53aWR0aCgpO1xyXG5cclxuaWYodyA8IDQyNiApe1xyXG4gICAgJCgnLmxmaXgnKS5zaG93KCk7XHJcbiAgICAkKCcucmZpeCcpLnNob3coKTtcclxufWVsc2V7XHJcbiAgICAkKCcubGZpeCcpLmhpZGUoKTtcclxuICAgICQoJy5yZml4JykuaGlkZSgpO1xyXG59XHJcblxyXG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcubmV4dHNlcnZpY2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI3NlcnZpY2VvbmUnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnI3NlcnZpY2V0d28nKS5mYWRlSW4oKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLnJldHVybnNlcnZpY2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI3NlcnZpY2V0d28nKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnI3NlcnZpY2VvbmUnKS5mYWRlSW4oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vICAgIHNlcnZpY2UgaGVhZGVyXHJcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHNjcm9sbFBvcyA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIGlmKHNjcm9sbFBvcyA+IDIwMCl7XHJcbiAgICAgICAgICAgICQoJy5zaXRlLWhlYWRlci5zZXJ2aWNlLWhlYWRlcicpLmFkZENsYXNzKCdzaG93Y29sb3InKTtcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICQoJy5zaXRlLWhlYWRlci5zZXJ2aWNlLWhlYWRlcicpLnJlbW92ZUNsYXNzKCdzaG93Y29sb3InKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn0pO1xyXG4iXX0=
